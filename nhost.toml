# Nhost Configuration - Free Tier Optimized
[global]
environment = "production"

# Frontend configuration
[web]
build_command = "npm run build"
build_directory = "build"
install_command = "npm install"

[web.environment]
REACT_APP_NHOST_SUBDOMAIN = "{{ secrets.NHOST_SUBDOMAIN }}"
REACT_APP_NHOST_REGION = "{{ secrets.NHOST_REGION }}"

# Database configuration - Free tier optimized
[postgres]
version = "14.6-20221215-1"

[postgres.resources]
compute = [
  { cpu = 62, memory = 128 }
]

# GraphQL API configuration - Free tier optimized
[hasura]
version = "v2.36.0-ce"
admin_secret = "{{ secrets.HASURA_GRAPHQL_ADMIN_SECRET }}"

[hasura.resources]
compute = [
  { cpu = 62, memory = 128 }
]

# Authentication configuration - Free tier optimized
[auth]
version = "0.21.2"

[auth.redirections]
client_url = "{{ secrets.AUTH_CLIENT_URL }}"

[auth.sign_up]
enabled = true
default_allowed_roles = ["user"]
default_role = "user"

[auth.method.email_password]
enabled = true
email_verification_required = true
password_min_length = 8

[auth.resources]
compute = [
  { cpu = 62, memory = 128 }
]

# File storage configuration - Free tier optimized
[storage]
version = "0.6.0"

[storage.resources]
compute = [
  { cpu = 62, memory = 128 }
]
